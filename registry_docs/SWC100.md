#### 函数默认可见性
[CWE-710](https://cwe.mitre.org/data/definitions/710.html):未遵守编码标准
#### 描述
默认情况下，未指定function可见性类型的functions是public的。 如果开发人员忘记设置可见性并且恶意用户能够进行未经授权或意外的状态更改，这可能会导致漏洞。

#### 补救方法
function可以指定为external, public, internal or private。 建议有意识地决定哪种可见性类型适合某个功能。 这可以显着减少合约系统的攻击面。

#### Contract Samples

##### visibility_not_set.sol

```
/*
 * @source: https://github.com/sigp/solidity-security-blog#visibility
 * @author: SigmaPrime 
 * Modified by Gerhard Wagner
 */

pragma solidity ^0.4.24;

contract HashForEther {

    function withdrawWinnings() {
        // Winner if the last 8 hex characters of the address are 0. 
        require(uint32(msg.sender) == 0);
        _sendWinnings();
     }

     function _sendWinnings() {
         msg.sender.transfer(this.balance);
     }
}
```
**分析如下**
withdrawWinnings()和_sendWinnings()未明确制定函数可见性，这两个函数的默认可见性未public，即任意用户都可以调用。

在_sendWinnings()随意调用的情况下，withdrawWinnings()的限制条件失效，导致任意地址都可以提取合约内的ETH

##### visibility_not_set_fixed.sol
解决方案：明确指定withdrawWinnings()为public，_sendWinnings()为internal(只能合约内部调用)
```
/*
 * @source: https://github.com/sigp/solidity-security-blog#visibility
 * @author: SigmaPrime
 * Modified by Gerhard Wagner
 */

pragma solidity ^0.4.24;

contract HashForEther {

    function withdrawWinnings() public {
        // Winner if the last 8 hex characters of the address are 0.
        require(uint32(msg.sender) == 0);
        _sendWinnings();
     }

     function _sendWinnings() internal {
         msg.sender.transfer(this.balance);
     }
}
```

> 经常遇到一个函数声明为public，但是合约内部并没有调用，建议修改可见性为external，明确标记该函数只能外部调用，而且可以起到节省gas的作用，因为external修饰的函数可以从calldata中读取参数。