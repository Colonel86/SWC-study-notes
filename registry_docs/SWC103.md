#### 浮动编译指示
[CWE-664](https://cwe.mitre.org/data/definitions/664.html):资源在其生命周期内的不当控制

#### 描述
合约应该使用经过彻底测试的相同编译器版本和标志来部署。 锁定 pragma 有助于确保合约不会被意外部署，例如使用可能引入对合约系统产生负面影响的错误的过时编译器版本。

#### 整治
锁定编译指示版本并考虑所选编译器版本的已知错误 (https://github.com/ethereum/solidity/releases)。

当合约打算供其他开发人员使用时，可以允许 Pragma 语句浮动，例如库或 EthPM 包中的合约。 否则，开发人员需要手动更新编译指示才能在本地编译。

#### Contract Samples
floating_pragma.sol

```
pragma solidity ^0.8.0;

contract PragmaNotLocked {
    uint public x = 1;
}
```
floating_pragma.yaml

```
description: Floating pragma
issues:
- id: SWC-103
  count: 1
  locations:
  - bytecode_offsets: {}
    line_numbers:
      floating_pragma.sol: [1]
```
floating_pragma_fixed.sol

```
pragma solidity 0.8.18;

contract PragmaFixed {
    uint public x = 1;
}
```
floating_pragma_fixed.yaml

```
description: Floating pragma
issues:
- id: SWC-103
  count: 0
  locations: []
```
no_pragma.sol

```
contract PragmaNotLocked {
    uint public x = 1;
}
```
no_pragma.yaml

```
description: Floating pragma
issues:
- id: SWC-103
  count: 1
  locations:
  - bytecode_offsets: {}
    line_numbers:
      no_pragma.sol: [1]
```
semver_floating_pragma.sol

```
pragma solidity >=0.4.0 < 0.6.0;
pragma solidity >=0.4.0<0.6.0;
pragma solidity >=0.4.14 <0.6.0;
pragma solidity >0.4.13 <0.6.0;
pragma solidity 0.4.24 - 0.5.2;
pragma solidity >=0.4.24 <=0.5.3 ~0.4.20;
pragma solidity <0.4.26;
pragma solidity ~0.4.20;
pragma solidity ^0.4.14;
pragma solidity 0.4.*;
pragma solidity 0.*;
pragma solidity *;
pragma solidity 0.4;
pragma solidity 0;

contract SemVerFloatingPragma {
}
```
semver_floating_pragma.yaml

```
description: Floating pragma with semantic versioning operators allows multiple compilers to be used
issues:
  - id: SWC-103
    count: 14
    locations:
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [1]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [2]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [3]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [4]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [5]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [6]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [7]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [8]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [9]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [10]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [11]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [12]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [13]
      - bytecode_offsets: {}
        line_numbers:
          semver_floating_pragma.sol: [14]
```
semver_floating_pragma_fixed.sol

```
pragma solidity 0.4.25;
// or
pragma solidity =0.4.25;

contract SemVerFloatingPragmaFixed {
}
```
semver_floating_pragma_fixed.yaml

```
description: Floating pragma with semantic versioning operators allows multiple compilers to be used
issues:
  - id: SWC-103
    count: 0
    locations: []
```
